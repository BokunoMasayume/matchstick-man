<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
</head>
<body>
    <!-- //TODO xmlns vs xmlns:xlink -->
    <!-- <svg width="1000" height="800" viewBox="0 0 1000 800" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> -->
        <!-- <g transform="translate(200,20)">
            <g>
                <circle cx="0" cy="0" r="10" fill="black"></circle>
                <g>
                    <line x1="0" y1="0" x2="0" y2="100" stroke="black"></line>
                    <g transform="translate(0,40)">
                        <line x1="0" y1="0" x2="50" y2="0" stroke="black"></line>
                    </g>
                    <g transform="translate(0, 50)">
                        <line x1="0" y1="0" x2="50" y2="0" stroke="black"></line>
                    </g>
                </g>
            </g>
        </g> -->
    <!-- </svg> -->
    <script src="./build/bundle.js"></script>
    <script>
        // trans:"translate(200,20)",
        //     subs:
            // { 
            //     "head":{
            //         eles:[
            //             {
            //                 type:"circle",
            //                 attrs:{
            //                     cx:0,
            //                     cy:0,
            //                     r:10,
            //                     fill:"black"
            //                 }
            //             }
            //         ],
            //         subs:{
            //             "body":{
            //                 eles:{
            //                     type:"line",
            //                     attrs:{
            //                         x1:0,
            //                         y1:0,
            //                         x2:0,
            //                         y2:100,
            //                         stroke:"black"
            //                     }
            //                 },
            //                 subs:{
            //                     "left_arm":{
            //                         eles:{
            //                             type:"line",
            //                             attrs:{
            //                                 x1:0,
            //                                 y1:0,
            //                                 x2:-50,
            //                                 y2:0,
            //                         stroke:"black"

            //                             }
            //                         },
            //                         trans:"translate(0,40)"
            //                     },
            //                     "right_arm":{
            //                         eles:{
            //                             type:"line",
            //                             attrs:{
            //                                 x1:0,
            //                                 y1:0,
            //                                 x2:50,
            //                                 y2:0,
            //                         stroke:"black"

            //                             }
            //                         },
            //                         trans: "translate(0, 40)"
            //                     }
            //                 }
            //             }
            //         }
            //     }
            // }
    </script>
    <script>
        window.test = new Matchstick({
            // trans:"translate(200,200)",
            subs:{
                "body":{
                    eles:{
                        type:"line",
                        attrs:{
                            x2:0,
                            y2:120
                        }
                    },
                    trans:"translate(200,200)",
                    subs:{
                        "head":{
                            eles:{
                                type:"circle",
                                attrs:{
                                    r:15
                                }
                            },
                            
                        },
                        "left_arm":{
                            eles:{
                                type:"line",
                                attrs:{
                                    x2:-50,
                                    y2:0
                                }
                            },
                            trans:"translate(0,50) rotate(-90)",
                            subs:{
                                "left_forearm":{
                                    trans:"translate(-50,0) rotate(-90)",
                                    eles:{
                                        type:"line",
                                        attrs:{
                                            x2:0,
                                            y2:-45
                                        }
                                    }
                                }
                            }

                        },
                        "right_arm":{
                            eles:{
                                type:"line",
                                attrs:{
                                    x2:50,
                                    y2:0
                                }
                            },
                            trans:"translate(0,50) rotate(90)",
                            subs:{
                                "right_forearm":{
                                    eles:{
                                        type:"line",
                                        attrs:{
                                            x2:0,
                                            y2:-45
                                        }
                                    },
                                    trans:"translate(50,0) rotate(90)"
                                }
                            }
                        },
                        "left_leg":{
                            eles:{
                                type:"line",
                                attrs:{
                                    x2:-70,
                                    y2:0
                                }
                            },
                            trans:"translate(0,120) rotate(-90)",
                            subs:{
                                "left_calf":{
                                    eles:{
                                        type:"line",
                                        attrs:{
                                            x2:0,
                                            y2:70
                                        }
                                    },
                                    trans:"translate(-70,0) rotate(90)"
                                }
                            }
                        },
                        "right_leg":{
                            eles:{
                                type:"line",
                                attrs:{
                                    x2:70,
                                    y2:0
                                }
                            },
                            trans:"translate(0,120) ",
                            subs:{
                                "right_calf":{
                                    eles:{
                                        type:"line",
                                        attrs:{
                                            x2:0,
                                            y2:70
                                        }
                                    },
                                    trans:"translate(70,0) "
                                }
                            }
                        }
                    }
                }
            }
            
        },
        {
            line:{
                "stroke-width": 10,
                "stroke-linecap":"round",
                x1:0,
                y1:0,
                stroke:"black"
            },
            circle:{
                cx:0,
                cy:0,
                fill:"black"
            }
        }
        );

        // test.registe("move",{
        //     0:{
        //         "head.body":{
        //             "rotate":0
        //         },
        //         "head.body.left_arm":{
        //             rotate:0
        //         }
        //     },
        //     50:{
        //         "head.body":{
        //             rotate:100
        //         },
        //         "head.body.left_arm":{
        //             rotate:200
        //         }
        //     },
        //     100:{
        //         "head.body":{
        //             rotate:0
        //         },
        //         "head.body.left_arm":{
        //             rotate:0
        //         }
        //     }
        // });
        k1 = {
            "body":{
                translate:"5 5"
            },
            "body.left_arm":{
                rotate:30
            },
            "body.right_arm":{
                rotate:-30
            },
            "body.left_arm.left_forearm":{
                rotate:50
            },
            "body.right_arm.right_forearm":{
                rotate:50
            },
            "body.left_leg":{
                rotate:-30
            },
            "body.right_leg":{
                rotate:30
            },
            "body.left_leg.left_calf":{
                rotate:-20
            },
            "body.right_leg.right_calf":{
                rotate:-20
            }
        };

        k2 = {
            "body":{
                translate:"0 0"
            },
            "body.left_arm":{
                rotate:0
            },
            "body.right_arm":{
                rotate:0
            },
            "body.left_arm.left_forearm":{
                rotate:0
            },
            "body.right_arm.right_forearm":{
                rotate:0
            },
            "body.left_leg":{
                rotate:0
            },
            "body.right_leg":{
                rotate:0
            },
            "body.left_leg.left_calf":{
                rotate:0
            },
            "body.right_leg.right_calf":{
                rotate:0
            }
        };

        k3={
            "body":{
                translate:"10 10"
            },
            "body.left_arm":{
                rotate:35
            },
            "body.right_arm":{
                rotate:-35
            },
            "body.left_arm.left_forearm":{
                rotate:50
            },
            "body.right_arm.right_forearm":{
                rotate:50
            },
            "body.left_leg":{
                rotate:-35
            },
            "body.right_leg":{
                rotate:35
            },
            "body.left_leg.left_calf":{
                rotate:-25
            },
            "body.right_leg.right_calf":{
                rotate:0
            }
        };



        k1 = {"body.left_arm":{"rotate":"8.320709583853114"},"body.left_arm.left_forearm":{"rotate":"-27.107774525041147"},"body.right_arm":{"rotate":"-9.696911956458395"},"body.right_arm.right_forearm":{"rotate":"-17.747197375790712"},"body.left_leg":{},"body.left_leg.left_calf":{},"body.right_leg":{},"body.right_leg.right_calf":{"rotate":"12.528807709151511"}};
        k2 ={"body.left_arm":{"rotate":"22.614924201466696"},"body.left_arm.left_forearm":{"rotate":"-27.107774525041147"},"body.right_arm":{"rotate":"-9.696911956458395"},"body.right_arm.right_forearm":{"rotate":"-17.747197375790712"},"body.left_leg":{},"body.left_leg.left_calf":{},"body.right_leg":{"rotate":"-1.6850485214808293"},"body.right_leg.right_calf":{"rotate":"44.60115580110834"}};
        k3 = {"body.left_arm":{"rotate":"32.25246231439765"},"body.left_arm.left_forearm":{"rotate":"-27.107774525041147"},"body.right_arm":{"rotate":"-15.979138117870995"},"body.right_arm.right_forearm":{"rotate":"-11.45473748209958"},"body.left_leg":{},"body.left_leg.left_calf":{},"body.right_leg":{"rotate":"-1.6850485214808293"},"body.right_leg.right_calf":{"rotate":"70.55313501465287"}};
        k4 = {"body.left_arm":{"rotate":"46.873336303029305"},"body.left_arm.left_forearm":{"rotate":"-40.5726555857584"},"body.right_arm":{"rotate":"-28.994115882460285"},"body.right_arm.right_forearm":{"rotate":"-20.348639429816384"},"body.left_leg":{},"body.left_leg.left_calf":{},"body.right_leg":{"rotate":"25.620094994429127"},"body.right_leg.right_calf":{"rotate":"70.55313501465287"}};


        test.attachOrigin();
        test.attachEvent("body.right_leg" , "rotate");
        // test.attachEvent("body.left_leg" , "rotate");
        test.attachEvent("body.right_leg.right_calf" , "rotate");
        // test.attachEvent("body.left_leg.left_calf" , "rotate");
        // test.attachEvent("body.left_arm" , "rotate");
        // test.attachEvent("body.right_arm" , "rotate");
        // test.attachEvent("body.left_arm.left_forearm" , "rotate");
        // test.attachEvent("body.right_arm.right_forearm" , "rotate");
        test.attachEvent("body.right_leg" , "translate");
        test.attachEvent("body.right_leg" , "scale");
        test.attachEvent("body.right_leg.right_calf" , "translate");

        test.registe('walk',{
            0:k1,
            33:k2,
            67:k3,
            100:k4
        })

        console.log(test);
        // document.getElementsByTagName('svg')[0].appendChild(test.body.group);
        let svg = document.createElementNS("http://www.w3.org/2000/svg" , 'svg');
        svg.setAttribute( "width","1000");
        svg.setAttribute( "height","800");
        svg.setAttribute("viewBox","0 0 1000 800");
        svg.appendChild(test.body.group);
        document.body.appendChild(svg);
        // test.walk();
        // test.move({
            
        // });

        // test.body.subs.body.subs.right_arm.group.addEventListener("mousemove",function(e){
        //     if(e.buttons != 1)return false;
        //     console.log(e);
        //     console.log(e.currentTarget.outerHTML);
        //     e.currentTarget.setAttribute("transform" , e.currentTarget.getAttribute("transform")+" rotate(.1)")
        // });
    </script>
</body>
</html>